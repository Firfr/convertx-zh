# 本地调试命令记录

当前项目翻译得到不是原码，是从docker镜像里面提取的编译后的前端文件。

## 获取前端代码

- 删除旧的前端代码
  ```bash
  mkdir -p ./代码 && rm -rf ./代码/*
  ```
- 拉取镜像
  ```bash
  docker pull c4illin/convertx:v0.17.0
  ```
  拉取双架构镜像到本地仓库
- 运行命令
  ```bash
  docker run --rm \
    --name convertx \
    -v ./代码:/code \
    --entrypoint sh \
    docker.firfe.de5.net/c4illin/convertx:v0.17.0 \
    -c 'cp -rf /app/dist /code && cp -rf /app/public /code && echo "✅ 文件已复制并覆盖，容器即将退出"'
  ```

## 翻译调试

```bash
docker run -itd \
  --name convertx \
  -e JWT_SECRET=c4illin_convertx \
  -e HTTP_ALLOWED=true \
  -e LANGUAGE=zh \
  -e ACCOUNT_REGISTRATION=true \
  -v ./代码/dist:/app/dist \
  -v ./代码/public:/app/public \
  -v ./ts-调试/data:/app/data \
  -p 1234:3000 \
  docker.firfe.de5.net/c4illin/convertx:v0.17.0
```

```bash
docker rm -f convertx
```

## 构建镜像测试
```bash
sudo rm -rf ./ts-调试/data
```
```bash
docker run -dit \
--restart=no \
--name convertx \
-e JWT_SECRET=c4illin_convertx \
-e HTTP_ALLOWED=true \
-e LANGUAGE=zh \
-e ACCOUNT_REGISTRATION=true \
-p 1234:3000 \
-v ./ts-调试/data:/app/data \
firfe/convertx-zh:0.17.0-arm64
```
```bash
docker rm -f convertx
```

